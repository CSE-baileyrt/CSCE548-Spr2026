<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>YouTube Tracker</title>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <style>
        body {
            font-family: Segoe UI, Arial, sans-serif;
            background-color: #f4f6f8;
            margin: 40px;
            color: #333;
        }

        h1 {
            margin-bottom: 10px;
        }

        h2 {
            margin-top: 40px;
            border-bottom: 2px solid #ddd;
            padding-bottom: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: #fff;
            margin-top: 15px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.08);
        }

        th, td {
            padding: 10px 12px;
            border-bottom: 1px solid #e0e0e0;
            text-align: left;
        }

        th {
            background-color: #f0f2f5;
            font-weight: 600;
        }

        tr:hover {
            background-color: #fafafa;
        }

        .flag-true {
            color: green;
            font-weight: bold;
        }

        .flag-false {
            color: #999;
        }
    </style>
</head>
<body>

    <h1>YouTube Tracker Dashboard</h1>
    <p>Overview of Videos, Lessons, and Slides</p>

    <h2>Videos</h2>
    <table id="videosTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Planned</th>
                <th>Recorded</th>
                <th>Posted</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h2>Lessons</h2>
    <table id="lessonsTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>Topic</th>
                <th>Module</th>
                <th>Sequence</th>
                <th>Video Title</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <h2>Slides</h2>
    <table id="slidesTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>Lesson ID</th>
                <th>Title</th>
                <th>Content</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
    const API_BASE = "https://localhost:44335"; // change if needed

    $(document).ready(function () {
        loadVideos();
        loadLessons();
        loadSlides();
    });

    function loadVideos() {
        $.getJSON(API_BASE + "/api/videos", function (videos) {
            const tbody = $("#videosTable tbody");
            tbody.empty();

            videos.forEach(v => {
                tbody.append(`
                    <tr>
                        <td>${v.id}</td>
                        <td>${v.title}</td>
                        <td class="${flagClass(v.planned)}">${v.planned}</td>
                        <td class="${flagClass(v.recorded)}">${v.recorded}</td>
                        <td class="${flagClass(v.posted)}">${v.posted}</td>
                    </tr>
                `);
            });
        });
    }

    function loadLessons() {
        $.getJSON(API_BASE + "/api/lessons", function (lessons) {
            const tbody = $("#lessonsTable tbody");
            tbody.empty();

            lessons.forEach(l => {
                tbody.append(`
                    <tr>
                        <td>${l.id}</td>
                        <td>${l.topic}</td>
                        <td>${l.module}</td>
                        <td>${l.sequence}</td>
                        <td>${l.video?.title ?? "Unknown"}</td>
                    </tr>
                `);
            });
        });
    }

    function loadSlides() {
        $.getJSON(API_BASE + "/api/slides", function (slides) {
            const tbody = $("#slidesTable tbody");
            tbody.empty();

            slides.forEach(s => {
                tbody.append(`
                    <tr>
                        <td>${s.id}</td>
                        <td>${s.lessonId}</td>
                        <td>${s.title}</td>
                        <td>${s.content}</td>
                    </tr>
                `);
            });
        });
    }

    function flagClass(value) {
        return value ? "flag-true" : "flag-false";
    }
    </script>

</body>
</html>
